# Week 4 斗地主oop化


### 读懂助教的代码

首先确定代码内的手牌表示。可以看到，单张卡牌被表示为Card类，重载自string类，从get_new_deck方法中可以观察出，单张卡牌直接按字符串表示，而多张卡牌使用的是vector<Card>标准库容器。  
DDZGame类的构造对象只是将三个玩家保存，run方法的注释很明确，首先生成一副牌，随机刷新牌面，然后模拟抓牌（用到了player类的draw方法）。  
随后叫地主。`这里的实现是随机选取地主`。  
选取地主后，发给地主最后的牌，计算各家的出牌位置，然后从地主开始循环打牌。  
>循环打牌的算法是：要求当前玩家打牌(play)->通知所有玩家打出的牌(observed)->判断游戏是否结束(leftNoCard)->切换下一个玩家，重复

于是，我明确了首要的目标：我的程序中手牌的表示是15位长度的数组，因此要直接复用就必须先转换手牌表示，然后再重新执行。


### 吸收助教写的好的地方
 ---
##### 手牌排序



##### Card类的比较算法
Card类使用了字符串常量来表示手牌，这与我初版本的实现相同，但我没有设计好比较函数。这个函数的特点是：先将手牌通过映射函数映射为数值类型，再完成比较。

##### Player类的substractfromhand算法
貌似是使用了有序列表的删除算法，而且利用了标准库的特征，先重排后删除。  
（其实啊，那个`*(i++) = *j`的算法我没太看懂）

---
## 需要补全的地方
- player类的legal方法（必须）
		是第二题用到的，判断人玩家打出的牌是否合法  
		在我的代码中，判断手牌类型的代码比较完善可以直接复用。
- player类的observed方法（必须）
		记录别人出了什么牌的函数。
		要实现高级功能，就在这里添加辅助代码
- player类的play方法（必须）
		轮到你出牌了，该选出自己的牌了
		这里有一个assert方法，断言自己打出的牌是合法的。
- player类的run方法（可选）
		做出叫地主流程的实现。
